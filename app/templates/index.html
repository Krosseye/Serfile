<!DOCTYPE html>
<html>
  <head>
    <title>{{ config.title }}</title>
    <link rel="icon" type="image/png" href="/assets/favicon.svg" />
    {% if is_prod %}
    <link rel="stylesheet" href="/assets/css/styles.min.css" />
    {% else %}
    <link rel="stylesheet" href="/assets/css/default.css" />
    <link rel="stylesheet" href="/assets/css/sortable.css" />
    {% endif %}
  </head>
  <body id="body">
    <div class="header">
      <span
        title="Home"
        class="header-title"
        id="home-button"
        onclick="window.location.href='/';"
        ><span
          ><span class="header-icon">üåä</span>{{ config.title }}</span
        ></span
      >
      <div class="buttons"></div>
    </div>
    <div id="motd-banner" class="header">
      <span class="header-title"
        ><span><span class="header-icon">üì¢</span>MOTD</span></span
      >
      <span class="header-title" id="motd-content">
        <span id="motd-title"></span>
        <span id="motd-message"></span>
      </span>
      <div class="buttons">
        <button title="Close" id="close-motd">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="ionicon"
            viewBox="0 0 512 512"
          >
            <path
              d="M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"
            />
          </svg>
        </button>
      </div>
    </div>
    <div class="container" id="drop-area">
      <h2>
        / {% set path_parts = path.split('/') %} {% for i in
        range(path_parts|length) %} {% set folder_path =
        '/'.join(path_parts[:i+1]) %} {% if i == path_parts|length - 1 %} {{
        path_parts[i] }} {% else %}
        <a
          class="directory"
          href="{{ url_for('files_route', path=folder_path) }}"
          >{{ path_parts[i] }}</a
        >
        / {% endif %} {% endfor %}
      </h2>
      <table class="sortable">
        <thead>
          <tr>
            <th title="Sort by Name">Name</th>
            <th title="Sort by Size">Size</th>
            <th title="Sort by Last Modified">Last Modified</th>
          </tr>
        </thead>
        <tbody>
          {% for file in files %}
          <tr>
            <td data-sort="{{ file.name }}">
              <span class="icon">{{ file.icon }}</span>
              {% if file.is_dir %}
              <a
                href="{{ url_for('files_route', path=path + '/' + file.name) }}"
                target="_self"
                >{{ file.name }}</a
              >
              {% else %}
              <a
                href="{{ url_for('files_route', path=path + '/' + file.name) }}"
                target="_blank"
                >{{ file.name }}</a
              >
              {% endif %}
            </td>
            <td data-sort="{{ file.size }}">{{ file.size_str }}</td>
            <td>{{ file.modified.strftime('%Y-%m-%d %H:%M:%S') }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <footer class="version">
      <span class="icon">üöÄ</span>Version: {{ version }}
    </footer>
    <div id="flask-data" style="display: none">
      <span id="flask-data-path">{{ path }}</span>
      <span id="flask-data-title">{{ config.title }}</span>
    </div>
    <div class="overlay" id="upload-overlay">
      <span class="overlay-icon">üñ±Ô∏è‚û°Ô∏èüìÇ</span>
      <h2>Drop to upload your files</h2>
    </div>
    <div class="overlay" id="upload-progress-overlay">
      <span class="overlay-icon" id="upload-progress-icon">‚è≥</span>
      <h2 id="upload-progress"></h2>
      <button class="close-button" id="close-upload-progress-overlay">
        ‚ùå
      </button>
    </div>
    {% if is_prod %}
    <script src="/assets/js/scripts.min.js"></script>
    {% else %}
    <script src="/assets/js/motd.js" defer></script>
    <script src="/assets/js/sortable.js" defer></script>
    <script
      src="/assets/js/drag-n-drop.js"
      type="text/javascript"
      charset="utf-8"
    ></script>
    {% endif %}
  </body>
</html>
